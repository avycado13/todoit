(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/db/zero/schema.gen.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/* eslint-disable */ /* tslint:disable */ // noinspection JSUnusedGlobalSymbols
// biome-ignore-all
/*
 * ------------------------------------------------------------
 * ## This file was automatically generated by drizzle-zero. ##
 * ## Any changes you make to this file will be overwritten. ##
 * ##                                                        ##
 * ## Additionally, you should also exclude this file from   ##
 * ## your linter and/or formatter to prevent it from being  ##
 * ## checked or modified.                                   ##
 * ##                                                        ##
 * ## SOURCE: https://github.com/0xcadams/drizzle-zero        ##
 * ------------------------------------------------------------
 */ __turbopack_context__.s([
    "builder",
    ()=>builder,
    "schema",
    ()=>schema
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$zero$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@rocicorp+zero@0.23.2025090100_@opentelemetry+core@2.1.0_@opentelemetry+api@1.9.0__typescript@5.9.3/node_modules/@rocicorp/zero/out/zero.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@rocicorp+zero@0.23.2025090100_@opentelemetry+core@2.1.0_@opentelemetry+api@1.9.0__typescript@5.9.3/node_modules/@rocicorp/zero/out/chunk-FMWNU2YJ.js [app-client] (ecmascript)");
;
const schema = {
    tables: {
        tasks: {
            name: "tasks",
            columns: {
                id: {
                    type: "number",
                    optional: true,
                    customType: null
                },
                title: {
                    type: "string",
                    optional: false,
                    customType: null
                },
                description: {
                    type: "string",
                    optional: true,
                    customType: null
                },
                due_date: {
                    type: "number",
                    optional: true,
                    customType: null
                },
                status: {
                    type: "string",
                    optional: true,
                    customType: null
                },
                created_at: {
                    type: "number",
                    optional: true,
                    customType: null
                },
                updated_at: {
                    type: "number",
                    optional: true,
                    customType: null
                },
                userId: {
                    type: "string",
                    optional: false,
                    customType: null,
                    serverName: "user_id"
                }
            },
            primaryKey: [
                "id"
            ]
        },
        user: {
            name: "user",
            columns: {
                id: {
                    type: "string",
                    optional: false,
                    customType: null
                },
                name: {
                    type: "string",
                    optional: false,
                    customType: null
                },
                email: {
                    type: "string",
                    optional: false,
                    customType: null
                },
                role: {
                    type: "string",
                    optional: true,
                    customType: null
                }
            },
            primaryKey: [
                "id"
            ]
        }
    },
    relationships: {},
    enableLegacyQueries: true,
    enableLegacyMutators: true
};
const builder = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createBuilder"])(schema);
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/db/zero/schema.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "permissions",
    ()=>permissions,
    "schema",
    ()=>schema
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$zero$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@rocicorp+zero@0.23.2025090100_@opentelemetry+core@2.1.0_@opentelemetry+api@1.9.0__typescript@5.9.3/node_modules/@rocicorp/zero/out/zero.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@rocicorp+zero@0.23.2025090100_@opentelemetry+core@2.1.0_@opentelemetry+api@1.9.0__typescript@5.9.3/node_modules/@rocicorp/zero/out/chunk-FMWNU2YJ.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$zero$2f$schema$2e$gen$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/db/zero/schema.gen.ts [app-client] (ecmascript)");
;
;
const schema = {
    ...__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$zero$2f$schema$2e$gen$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["schema"],
    enableLegacyMutators: false
};
const allowIfTaskOwner = (session, param)=>{
    let { cmp } = param;
    // You can see a task if you are its owner.
    return cmp('userId', session.user.id);
};
const permissions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["definePermissions"])(schema, ()=>{
    return {
        tasks: {
            row: {
                select: [
                    allowIfTaskOwner
                ],
                insert: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ANYONE_CAN"],
                update: {
                    preMutation: [
                        allowIfTaskOwner
                    ]
                },
                delete: [
                    allowIfTaskOwner
                ]
            }
        },
        user: {
            row: {
                select: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ANYONE_CAN"],
                insert: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ANYONE_CAN"],
                update: {
                    preMutation: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ANYONE_CAN"]
                },
                delete: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$chunk$2d$FMWNU2YJ$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ANYONE_CAN"]
            }
        }
    };
});
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/db/zero/mutators.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// db/zero/mutators.ts
__turbopack_context__.s([
    "createMutators",
    ()=>createMutators
]);
function createMutators(authData) {
    return {
        tasks: {
            add: async (tx, param)=>{
                let { title, description, due_date, status } = param;
                // The user object from AuthSession has a slightly different shape
                if (!authData) {
                    throw new Error("Not authenticated");
                }
                try {
                    await tx.mutate.tasks.insert({
                        id: null,
                        title,
                        description,
                        due_date: due_date !== null && due_date !== void 0 ? due_date : null,
                        status,
                        created_at: Date.now(),
                        updated_at: Date.now(),
                        // Access the user ID correctly from the AuthSession type
                        userId: authData.user.id
                    });
                // ID is auto-generated by the database (serial)
                } catch (err) {
                    console.error("Error adding task:", err);
                    throw err;
                }
            },
            remove: async (tx, taskId)=>{
                if (!(authData === null || authData === void 0 ? void 0 : authData.user)) {
                    throw new Error("Not authenticated");
                }
                const task = await tx.query.tasks.where("id", parseInt(taskId)).where("userId", authData.user.id).one();
                if (!task) return;
                await tx.mutate.tasks.delete({
                    id: task.id
                });
            },
            updateTask: async (tx, param)=>{
                let { id, status, title, description, due_date } = param;
                if (!(authData === null || authData === void 0 ? void 0 : authData.user)) throw new Error("Not authenticated");
                // Ensure the task belongs to the authenticated user
                const task = await tx.query.tasks.where("id", parseInt(id)).where("userId", authData.user.id).one();
                if (!task) return;
                await tx.mutate.tasks.update({
                    id: task.id,
                    status,
                    title: title !== null && title !== void 0 ? title : undefined,
                    description,
                    due_date,
                    updated_at: Date.now()
                });
            }
        }
    };
}
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/components/zero-init.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ZeroInit",
    ()=>ZeroInit
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$5$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$polyfills$2f$process$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = /*#__PURE__*/ __turbopack_context__.i("[project]/node_modules/.pnpm/next@15.5.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/polyfills/process.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$5$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@15.5.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$react$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@rocicorp+zero@0.23.2025090100_@opentelemetry+core@2.1.0_@opentelemetry+api@1.9.0__typescript@5.9.3/node_modules/@rocicorp/zero/out/react.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$zero$2f$schema$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/db/zero/schema.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$zero$2f$mutators$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/db/zero/mutators.ts [app-client] (ecmascript)");
"use client";
;
;
;
;
function ZeroInit(param) {
    let { children, userID, token } = param;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$5$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$rocicorp$2b$zero$40$0$2e$23$2e$2025090100_$40$opentelemetry$2b$core$40$2$2e$1$2e$0_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_$5f$typescript$40$5$2e$9$2e$3$2f$node_modules$2f40$rocicorp$2f$zero$2f$out$2f$react$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ZeroProvider"], {
        userID: userID,
        auth: token,
        server: ("TURBOPACK compile-time value", "http://localhost:8081"),
        schema: __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$zero$2f$schema$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["schema"],
        mutators: (0, __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$zero$2f$mutators$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createMutators"])({
            user: {
                id: userID
            },
            session: token ? {
                token
            } : undefined
        }),
        children: children
    }, void 0, false, {
        fileName: "[project]/components/zero-init.tsx",
        lineNumber: 16,
        columnNumber: 5
    }, this);
}
_c = ZeroInit;
var _c;
__turbopack_context__.k.register(_c, "ZeroInit");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
]);

//# sourceMappingURL=_1ac24aa6._.js.map